(function(a,h,j){var k=function(t,y){var B=j.querySelector(t),p=[].slice.call(B.children,0),C=p[0],z={},x=0,u=function(D,E){if(!p[D]){return}b(z,"deactivate",q(C,E));C=p[D];p.map(r);b(z,"activate",q(C,E));g(C,"active");l(C,"inactive")},r=function(D,E){var G=E-p.indexOf(C),F=G>0?"after":"before";["before(-\\d+)?","after(-\\d+)?","active","inactive"].map(l.bind(null,D));D!==C&&["inactive",F,F+"-"+Math.abs(G)].map(g.bind(null,D))},w=function(D,E){b(z,"slide",q(p[D],E))&&u(D,E)},v=function(E){var D=p.indexOf(C)+1;b(z,"next",q(C,E))&&u(D,E)},s=function(E){var D=p.indexOf(C)-1;b(z,"prev",q(C,E))&&u(D,E)},q=function(D,E){E=E||{};E.index=p.indexOf(D);E.slide=D;return E},A={on:i.bind(null,z),off:d.bind(null,z),fire:b.bind(null,z),slide:w,next:v,prev:s,parent:B,slides:p};g(B,"parent");p.map(function(D){g(D,"slide");$(D).attr("rel",x);x++});Object.keys(y||{}).map(function(E){var D=y[E];D&&f[E](A,D===true?{}:D)});u(0);e.push(A);return A},e=[],m={},i=function(q,p,r){(q[p]||(q[p]=[])).push(r)},d=function(q,p,r){q[p]=(q[p]||[]).filter(function(s){return s!==r})},b=function(q,p,r){return(q[p]||[]).concat((q!==m&&m[p])||[]).reduce(function(t,s){return t&&s(r)!==false},true)},g=function(q,p){q.classList.add(a+"-"+p)},l=function(q,p){q.className=q.className.replace(new RegExp(a+"-"+p+"(\\s|$)","g")," ").replace(/^\s+|\s+$/g,"")},c=function(p){return function(q){e.map(function(r){r[p].call(null,q)})}},n=function(p){return{from:function(q,r){(r=r||{})[p]=true;return k(q,r)}}},o=function(p){return function(q){var r,s;j.addEventListener("keydown",function(u){var t=u.which;if(p==="X"){t===37&&q.prev();(t===32||t===39)&&q.next()}else{t===38&&q.prev();(t===32||t===40)&&q.next()}});q.parent.addEventListener("touchstart",function(t){if(t.touches.length){r=t.touches[0]["page"+p];s=0}});q.parent.addEventListener("touchmove",function(t){if(t.touches.length){t.preventDefault();s=t.touches[0]["page"+p]-r}});q.parent.addEventListener("touchend",function(){Math.abs(s)>50&&(s>0?q.prev():q.next())})}},f={horizontal:o("X"),vertical:o("Y")};h[a]={from:k,slide:c("slide"),next:c("next"),prev:c("prev"),horizontal:n("horizontal"),vertical:n("vertical"),on:i.bind(null,m),off:d.bind(null,m),plugins:f}}("bespoke",this,document));